local Players = game:GetService("Players")
local RunService = game:GetService("RunService")

local player = Players.LocalPlayer
local gui = Instance.new("ScreenGui")
gui.Name = "PetAgeGui"
gui.ResetOnSpawn = false
gui.Parent = player:WaitForChild("PlayerGui")

-- UI Button
local button = Instance.new("TextButton")
button.Size = UDim2.new(0, 120, 0, 40)
button.Position = UDim2.new(1, -140, 0.5, -20) -- middle right
button.AnchorPoint = Vector2.new(0, 0.5)
button.Text = "Age +1"
button.BackgroundColor3 = Color3.fromRGB(30, 144, 255)
button.TextColor3 = Color3.new(1, 1, 1)
button.Font = Enum.Font.GothamBold
button.TextSize = 18
button.Parent = gui

-- Progress bar
local progressBarBG = Instance.new("Frame")
progressBarBG.Size = UDim2.new(0, 120, 0, 10)
progressBarBG.Position = UDim2.new(1, -140, 0.5, 30)
progressBarBG.AnchorPoint = Vector2.new(0, 0.5)
progressBarBG.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
progressBarBG.Parent = gui

local progressBar = Instance.new("Frame")
progressBar.Size = UDim2.new(0, 0, 1, 0)
progressBar.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
progressBar.BorderSizePixel = 0
progressBar.Parent = progressBarBG

-- Error message
local errorText = Instance.new("TextLabel")
errorText.Size = UDim2.new(0, 300, 0, 25)
errorText.Position = UDim2.new(0.5, -150, 0.6, 0)
errorText.AnchorPoint = Vector2.new(0.5, 0)
errorText.TextColor3 = Color3.fromRGB(255, 0, 0)
errorText.Text = ""
errorText.BackgroundTransparency = 1
errorText.Font = Enum.Font.Gotham
errorText.TextScaled = true
errorText.Visible = false
errorText.Parent = gui

-- Function to find held pet with "Age"
local function findHeldPet()
	local character = player.Character or player.CharacterAdded:Wait()
	for _, tool in ipairs(character:GetChildren()) do
		if tool:IsA("Tool") and tool:FindFirstChild("Age") and tool.Age:IsA("IntValue") then
			return tool
		end
	end
	return nil
end

-- Error display
local function showError(text)
	errorText.Text = text
	errorText.Visible = true
	wait(2)
	errorText.Visible = false
end

-- Aging logic
local isBusy = false

button.MouseButton1Click:Connect(function()
	if isBusy then return end

	local pet = findHeldPet()
	if not pet then
		showError("❌ No pet held!")
		return
	end

	local ageValue = pet:FindFirstChild("Age")
	if not ageValue or not ageValue:IsA("IntValue") then
		showError("❌ 'Age' IntValue not found in pet!")
		return
	end

	isBusy = true
	button.Text = "Processing..."
	button.AutoButtonColor = false

	local duration = 5 -- seconds to simulate
	local startTime = tick()

	while tick() - startTime < duration do
		local percent = math.clamp((tick() - startTime) / duration, 0, 1)
		progressBar.Size = UDim2.new(percent, 0, 1, 0)
		RunService.RenderStepped:Wait()
	end

	ageValue.Value += 1

	button.Text = "Age +1"
	progressBar.Size = UDim2.new(0, 0, 1, 0)
	button.AutoButtonColor = true
	isBusy = false
end)
